{% extends 'base.html.twig' %}

{% block title %}Ajouter une r√©ponse{% endblock %}

{% block body %}
    <h1>‚ûï Nouvelle r√©ponse</h1>

    {{ form_start(form, {'attr': {'id': 'reponse-form'}}) }}

    <div class="mb-3">
        {{ form_label(form.contenu) }}
        {{ form_widget(form.contenu, {'attr': {'class': 'form-control', 'placeholder': '√âcrivez votre r√©ponse ici...'}}) }}
        <div class="form-text text-danger">
            {{ form_errors(form.contenu) }}
        </div>
    </div>

    <div class="mb-3">
        {{ form_label(form.dateCreation) }}
        {{ form_widget(form.dateCreation, {'attr': {'class': 'form-control'}}) }}
        <div class="form-text text-danger">
            {{ form_errors(form.dateCreation) }}
        </div>
    </div>

    <button class="btn btn-success">üí¨ Envoyer la r√©ponse</button>

    {{ form_end(form) }}
{% endblock %}

{% block javascripts %}
<script>
document.addEventListener('DOMContentLoaded', function () {
    const form = document.getElementById('reponse-form');
    form.addEventListener('submit', function (e) {
        const contenu = document.querySelector('[name="reponse[contenu]"]');
        const errors = [];

        if (contenu && contenu.value.trim().length < 10) {
            errors.push("Le contenu doit contenir au moins 10 caract√®res.");
        }

        if (errors.length > 0) {
            e.preventDefault();
            alert(errors.join("\n"));
        }
    });
});
</script>
{% endblock %}
